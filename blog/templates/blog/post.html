{% extends "base.html" %}

{% block title %}{{ blogpost.blog_title }} - GatorTech{% endblock %}

{% block content %}

    <h1>{{ blogpost.blog_title }}</h1>
    <h4>Written by {{ blogpost.blog_author.get_full_name }} on {{ blogpost.post_date }}</h4>
    <p>{{ blogpost.blog_content }}</p>
    <h3>Comments</h3>
    {% if blogpost.blogcomment_set.all %}
        {% for comment in blogpost.blogcomment_set.all %}
            <p>{{ comment.comment_text }} posted by {{ comment.comment_author.get_full_name }} on {{ comment.comment_date }}</p>
        {% endfor %}
    {% else %}
        <p>No comments</p>
    {% endif %}

    {% comment %}
        There is probably a better way to handle inline forms.
        Only issue is django will auto-render forms without classes.
    {% endcomment %}
    {% if request.user.is_authenticated %}
        <form method="post" action="/blog/add_comment/">
            {% csrf_token %}
            <input type="hidden" id="id_blog_post" name="blog_post" value="{{ blogpost.id }}" />
            <input type="hidden" id="id_comment_author" name="comment_author" value="{{ request.user.id }}" />
            <textarea id="id_comment_text" name="comment_text" placeholder="Write a comment"></textarea>
            <br />
            <input type="submit" value="Post Comment" />
        </form>
    {% endif %}

{% endblock %}